> Microsoft는 전세계 다양한 지역에 데이터 센터가 있어 그곳의 서버를 사용하여 Azure 리소스를 생성할 수 있다. 하지만 해당 데이터 센터 전체, 혹은 단일 데이터 센터 내의 랙 단위로 오류나 장애가 발생할 수 있다. 따라서 가용성 영역(Availability zones), 가용성 집합(Availability sets)이 필요하다.


## 1. 가용성 영역(Availability Zones)
![Untitled](https://user-images.githubusercontent.com/50107548/143150548-a6f6ceae-3094-4149-b729-3768c1d9de9e.png)
- 단일 데이터 센터 전체에 장애가 발생하는 경우를 방지하기 위해 데이터 센터를 묶어 물리적으로 분리되어 분산 구성하는 방식이다.
- 가용성 영역에는 하나 이상의 데이터 센터가 존재한다.
- 가용성 영역 1, 2, 3에 분산 배포한다면 zone 1번에 장애가 발생하더라도 나머지 zone 2, 3번은 정상 작동이 되어 서비스 연속성을 보장할 수 있다.
- 가용성 영역이 지원되는 Azure 지역에 한해서 각 지역마다 3개의 가용성 영역을 가지고 있다.
- 가용성 영역을 가진 리전이라도 모든 서비스가 가용성 영역을 지원하는 것은 아니며, 모든 리전이 동일한 수준으로 제공되지도 않다.

## 2. 가용성 집합(Availability Sets)
![Untitled (1)](https://user-images.githubusercontent.com/50107548/143150594-d4ada4eb-4e23-485d-9f4e-6f0504f37e19.png)
- 단일 데이터 센터 내의 랙(Rack) 단위로 발생하는 장애를 방지하기 위해 단일 데이터 센터 내에서 여러 서버 랙(Rack) 단위를 묶어 가상머신의 중복성 가용성을 제공한다.
- 여기서 랙(Rack)이란, 서버 또는 네트워크 장비들을 넣어두는 철체 프레임으로 데이터 센터나 서버 룸과 같이 다수의 서버/네트워크 장비들을 두는 곳으로 사용한다.
- 가상 머신의 논리적 그룹이며 가용성 집합 내에 둘 이상의 가상 머신을 만드는 것이 좋다. 
- Fault Domain(장애 도메인)
  - 장애가 발생할 경우 데이터의 손실을 막기 위한 방식으로, 물리적인 서버 랙 단위로 나뉘어 설정한다.
  - 공통 전원과 네트워크 스위치를 공유하는 가상 머신 그룹을 정의한다.
  - 최대 3개의 장애 도메인을 구성할 수 있다.
  - 가상 머신을 가용성 집합에 배치한다고 해서 애플리케이션이 운영 체제 또는 애플리케이션 고유의 오류로부터 보호되는 것은 아니다.
  - 잠재적인 물리적 하드웨어 오류, 네트워크 중단, 전력 차단의 영향이 제한될 뿐이다.
- Update Domain(업데이트 도메인)
  - 동시에 다시 부팅할 수 있는 가상 머신 그룹과 기본 물리적 하드웨어를 나타낸다.
  - 특정 UD의 펌웨어(물리 장치) 업데이트가 필요할 경우, 그 위에 올라가는 OS 및 서비스 데이터는 다른 UD의 펌웨어로 라이브 마이그레이션이 된다.
  - 최대 20개의 업데이트 도메인을 구성할 수 있다.
  - 재부팅되는 업데이트 도메인 순서는 계획된 유지 보수 중 순차적으로 진행할 수 없으며 한 번에 하나의 업데이트 도메인만이 재부팅된다.
  - 다시 부팅된 업데이트 도메인을 복구할 시간으로 30분이 제공되며 이 시간이 지나면 다른 업데이트 도메인에서 유지 관리가 시작된다.
